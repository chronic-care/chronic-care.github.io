(this.webpackJsonpmpc=this.webpackJsonpmpc||[]).push([[2],{100:function(e,t,n){},105:function(e,t,n){},128:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),s=n.n(i),o=(n(96),n(29)),l=n(9),c=n(23),u=n(5),m=n(6),p=n(18),d=n(8),h=n(7),v=(n(97),n(57),n(98),n(99),n(198)),f=n(197),y=n(39),b=(n(100),n(193)),E=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={checked:!1,value:""},a}return Object(m.a)(n,[{key:"render",value:function(){var e,t,n=this,i=Object(a.createRef)(),s={linkId:this.props.linkId,type:this.props.type,prefix:this.props.prefix,answerOption:this.props.answerOption,text:this.props.text},o=function(e){s.prefix&&s.text&&(s.text=s.prefix+": "+s.text),c(s,e.target.value);var t,n=Object(y.a)(i.current.children);try{for(n.s();!(t=n.n()).done;){var a=t.value;a.value===e.target.value?a.classList.add("selected"):a.classList.remove("selected")}}catch(r){n.e(r)}finally{n.f()}},l=function(e){e.length>0&&(s.text=s.prefix+": "+s.text,n.props.parentCallback(s,JSON.stringify({valueString:e})))},c=function(e,t){n.props.parentCallback(e,t)};return r.a.createElement("div",{className:"multi-container"},r.a.createElement("div",{className:"multi-button ".concat(this.state.checked?"selected":"")},r.a.createElement("label",null,r.a.createElement("input",{value:s.prefix,type:"checkbox",checked:this.state.checked,onChange:function(e){var t=e.target.checked;n.setState({checked:t,value:s.prefix})}})," ",r.a.createElement("span",null,s.prefix))),r.a.createElement("div",{className:"additional-info-box ".concat(this.state.checked?null:"hidden")},"pain-location"===this.props.sectionCode?r.a.createElement("div",null,"choice"===this.props.type?r.a.createElement("div",null,r.a.createElement("p",null,s.text),r.a.createElement("div",{className:"button-box",ref:i},null===(e=this.props.answerOption)||void 0===e?void 0:e.map((function(e){var t;return r.a.createElement(f.a,{key:JSON.stringify(e),value:JSON.stringify(e),onClick:function(e){o(e)},size:"sm",variant:"outline-secondary"},null===(t=e.valueCoding)||void 0===t?void 0:t.display)})))):r.a.createElement("div",{className:"other-textbox"},r.a.createElement("input",{type:"text",placeholder:"Type here...",onChange:function(e){return l(e.target.value)}}))):r.a.createElement("div",null,"choice"===this.props.type?r.a.createElement("div",null,r.a.createElement("p",{className:"follow-up-question"},s.text),r.a.createElement("div",{className:"button-box"},r.a.createElement(b.a,{ref:i},null===(t=this.props.answerOption)||void 0===t?void 0:t.map((function(e){var t;return r.a.createElement(f.a,{key:JSON.stringify(e),size:"sm","aria-required":"true",variant:"outline-secondary",value:JSON.stringify(e),onClick:function(e){return o(e)}},null===(t=e.valueCoding)||void 0===t?void 0:t.display)}))))):r.a.createElement("div",{className:"other-textbox"},r.a.createElement("input",{type:"text",placeholder:"Type here...",onChange:function(e){return l(e.target.value)}})))))}}]),n}(r.a.Component),g=n(38),k=n(14),w=(n(105),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={activeButton:!1,value:""},a}return Object(m.a)(n,[{key:"render",value:function(){var e,t=this,n=Object(a.createRef)(),i={linkId:this.props.linkId,type:this.props.type,prefix:this.props.prefix,answerOption:this.props.answerOption,text:this.props.text},s=function(e,n){t.props.parentCallback(e,n)};return r.a.createElement("div",{className:"choice-button-group"},r.a.createElement("p",null,i.text),r.a.createElement(b.a,{ref:n},null===(e=i.answerOption)||void 0===e?void 0:e.map((function(e){var t;return r.a.createElement(f.a,{key:JSON.stringify(e),size:"sm","aria-required":"true",variant:"outline-secondary",value:JSON.stringify(e),onClick:function(e){return function(e){i.prefix&&i.text&&(i.text=i.prefix+": "+i.text),s(i,e.target.value);var t,a=Object(y.a)(n.current.children);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.value===e.target.value?r.classList.add("selected"):r.classList.remove("selected")}}catch(o){a.e(o)}finally{a.f()}}(e)}},null===(t=e.valueCoding)||void 0===t?void 0:t.display)}))))}}]),n}(r.a.Component)),I=n(19),O=n.n(I),x=n(83),C=n(86),N=(n(127),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).questionnaireItemRef=Object(a.createRef)(),r.vidRef=Object(a.createRef)(),r.state={showReview:!1,questionnaireResponse:{linkId:e.QuestionnaireItem.linkId,text:e.QuestionnaireItem.prefix+": "+e.QuestionnaireItem.text,item:[]}},r}return Object(m.a)(n,[{key:"handleNextQuestionScroll",value:function(e){var t=this;this.questionnaireItemRef.current.id===e&&(null!==this.vidRef.current&&this.stopVideos(),this.questionnaireItemRef.current.nextSibling&&(this.questionnaireItemRef.current.nextSibling.classList.add("active"),this.questionnaireItemRef.current.classList.remove("active"),this.questionnaireItemRef.current.nextSibling.scrollIntoView({behavior:"smooth",block:"nearest"}))),this.questionnaireItemRef.current.nextSibling.classList.contains("questionnaire-item")||this.setState({showReview:!0},(function(){t.props.receivingCallback(t.state.showReview)}))}},{key:"handlePreviousQuestionScroll",value:function(e){this.questionnaireItemRef.current.id===e&&(null!==this.vidRef.current&&this.stopVideos(),this.questionnaireItemRef.current.previousSibling.classList.add("active"),this.questionnaireItemRef.current.classList.remove("active"),this.questionnaireItemRef.current.previousSibling.scrollIntoView({behavior:"smooth",block:"nearest"}))}},{key:"stopVideos",value:function(){var e=document.querySelectorAll("iframe, video");Array.prototype.forEach.call(e,(function(e){if("video"===e.tagName.toLowerCase())e.pause();else{var t=e.src;e.src=t}}))}},{key:"render",value:function(){var e=this,t="";t=this.props.QuestionnaireItem.text?this.props.QuestionnaireItem.text:"";var a=function(e,t){if(e=Number(e),isNaN(e)||null===e)return 0;var n=(e-1)/t;return isNaN(n)?0:Math.round(100*n)},i=function(t,n){var a=JSON.parse(n),r={linkId:t.linkId,text:t.text,answer:[a]};e.props.onChange(r)},s=function(t){var n=(new Date).toISOString();i(e.props.QuestionnaireItem,JSON.stringify({valueDateTime:n}))},o={width:"100%",height:"200",playerVars:{}},l={replace:function(t){var n,a,i,l,c,u,m,p;return"replace"===(null===t||void 0===t||null===(n=t.next)||void 0===n||null===(a=n.attribs)||void 0===a?void 0:a.id)&&"psa-video"===(null===t||void 0===t||null===(i=t.next)||void 0===i||null===(l=i.attribs)||void 0===l?void 0:l.value)?r.a.createElement(x.a,{id:"youtube-video",ref:e.vidRef,videoId:"YqticruOZ7U",opts:o,onEnd:s}):"replace"===(null===t||void 0===t||null===(c=t.next)||void 0===c||null===(u=c.attribs)||void 0===u?void 0:u.id)&&"psa-benefits-link"===(null===t||void 0===t||null===(m=t.next)||void 0===m||null===(p=m.attribs)||void 0===p?void 0:p.value)?r.a.createElement("a",{id:"replace",className:"d-flex justify-content-center mt-1",target:"_blank",rel:"noopener noreferrer",href:"https://www.cdc.gov/cancer/prostate/basic_info/benefits-harms.htm"},r.a.createElement("button",{onClick:s,className:"btn btn-outline-secondary"},"Visit CDC Web Site")):void 0}};return r.a.createElement(v.a,{ref:this.questionnaireItemRef,className:"questionnaire-item",id:this.props.QuestionnaireItem.linkId},r.a.createElement("div",{className:"questionnaire-section-header"},"1"===this.props.QuestionnaireItem.linkId?"":r.a.createElement(f.a,{className:"btn-outline-secondary previous-button",value:this.props.QuestionnaireItem.linkId,onClick:function(t){return e.handlePreviousQuestionScroll(t.target.value)}},r.a.createElement(k.a,{icon:g.a,onClick:function(t){return e.handlePreviousQuestionScroll(e.props.QuestionnaireItem.linkId)}})),r.a.createElement("div",{className:"prefix-text"},r.a.createElement("h3",null,this.props.QuestionnaireItem.prefix)),r.a.createElement("div",{className:"progress-circle"},r.a.createElement(C.a,{value:a(this.props.QuestionnaireItem.linkId,this.props.length),text:a(this.props.QuestionnaireItem.linkId,this.props.length)+"%"}))),r.a.createElement("div",{className:"description-text"},r.a.createElement("div",null," ",O()(t,l))),r.a.createElement("div",null,"boolean"===this.props.QuestionnaireItem.type?r.a.createElement("div",{className:"boolean-type"},r.a.createElement("div",{className:"radio-button"},r.a.createElement("input",{type:"radio",name:this.props.QuestionnaireItem.linkId,onChange:function(){return e.props.onChange(e.props.QuestionnaireItem,[{valueBoolean:!0}])}})," ",r.a.createElement("label",{htmlFor:this.props.QuestionnaireItem.linkId}," Yes")),r.a.createElement("div",{className:"radio-button"},r.a.createElement("input",{type:"radio",name:this.props.QuestionnaireItem.linkId,onChange:function(){return e.props.onChange(e.props.QuestionnaireItem,[{valueBoolean:!1}])}}),r.a.createElement("label",{htmlFor:this.props.QuestionnaireItem.linkId}," No"))):"choice"===this.props.QuestionnaireItem.type?r.a.createElement("div",{className:"choice-type"},this.populateChoice(this.props)):"quantity"===this.props.QuestionnaireItem.type?r.a.createElement("div",{className:"quantity-type"},r.a.createElement("input",{type:"text",onChange:function(t){return e.props.onChange(e.props.QuestionnaireItem,[{valueQuantity:{value:parseFloat(t.target.value)}}])}})," days"):"group"===this.props.QuestionnaireItem.type?r.a.createElement("div",{className:"open-choice-type"},this.populateGroupType(this.props)):"text"===this.props.QuestionnaireItem.type?r.a.createElement("div",{className:"text-type"},r.a.createElement("textarea",{placeholder:"Type your answer here......",onChange:function(t){i(e.props.QuestionnaireItem,JSON.stringify({valueString:t.target.value}))}})):r.a.createElement("div",null)),r.a.createElement("div",null,this.props.QuestionnaireItem.item?this.props.QuestionnaireItem.item.map((function(t,a){return r.a.createElement(n,{QuestionnaireItem:t,key:a,onChange:e.props.onChange})})):null),r.a.createElement(f.a,{variant:"outline-secondary",size:"lg",className:"next-button",value:this.props.QuestionnaireItem.linkId,onClick:function(t){return e.handleNextQuestionScroll(t.target.value)}},"Next"))}},{key:"populateChoice",value:function(e){var t=this;return r.a.createElement(w,Object.assign({parentCallback:function(n,a){var r,i=JSON.parse(a),s={linkId:n.linkId,text:n.text,answer:[i]},o=t.state.questionnaireResponse.item;if(o.length>0)for(var l=0;l<o.length;l++);else r=s,t.setState((function(e){var n={linkId:e.questionnaireResponse.linkId,text:e.questionnaireResponse.text,item:e.questionnaireResponse.item.concat(r)};return{showReview:t.state.showReview,questionnaireResponse:n}}),(function(){e.onChange(t.state.questionnaireResponse)}))},key:JSON.stringify(e.QuestionnaireItem)},e.QuestionnaireItem))}},{key:"populateGroupType",value:function(e){var t,n,a=this,i=function(t,n){var r={linkId:t.linkId,text:t.text,answer:[JSON.parse(n)]},i=function(e){return e.linkId===r.linkId},s=a.state.questionnaireResponse;s.item.some(i)?s.item.some(i)&&a.setState((function(e){for(var t in s.item)s.item[t].linkId===r.linkId&&(s.item[t].answer=r.answer)}),(function(){e.onChange(a.state.questionnaireResponse)})):a.setState((function(e){var t={linkId:e.questionnaireResponse.linkId,text:e.questionnaireResponse.text,item:e.questionnaireResponse.item.concat([r])};return{showReview:a.state.showReview,questionnaireResponse:t}}),(function(){e.onChange(a.state.questionnaireResponse)}))};return"pain-location"===e.QuestionnaireItem.code[0].code||"about-my-treatments"===e.QuestionnaireItem.code[0].code?r.a.createElement("div",null,null===(t=e.QuestionnaireItem.item)||void 0===t?void 0:t.map((function(t){return r.a.createElement(E,Object.assign({sectionCode:e.QuestionnaireItem.code[0].code,parentCallback:i,key:JSON.stringify(t)},t),t.answerOption)}))):r.a.createElement("div",null,null===(n=e.QuestionnaireItem.item)||void 0===n?void 0:n.map((function(e){return r.a.createElement(w,Object.assign({parentCallback:i,key:JSON.stringify(e)},e))})))}}]),n}(r.a.Component)),S=(n(128),n(194)),Q=n(87),R=n.n(Q),j=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props.item.sort((function(e,t){return Number(e.linkId)>Number(t.linkId)?1:-1}));return r.a.createElement("div",{className:"review-page-container"},e.map((function(e){var t,n=JSON.stringify(e.text);return e.answer?r.a.createElement("div",{className:"question-response-container",key:e.linkId},r.a.createElement("div",{className:"text-response-container"},r.a.createElement("h5",null,"Question:"),r.a.createElement("h6",{className:"text-response-question"},O()(n,{replace:function(e){var t=e.attribs;return t&&'\\"replace\\"'===t.id&&r.a.createElement(r.a.Fragment,null)}})),r.a.createElement(S.a,{responsive:!0,bordered:!0,striped:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Answer"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.answer[0].valueString||R()(e.answer[0].valueDateTime).format("MMMM Do YYYY, h:mm:ss a"))))))):r.a.createElement("div",{className:"question-response-container",key:e.linkId},r.a.createElement("h6",null,O()(n)),r.a.createElement(S.a,{responsive:!0,bordered:!0,striped:!0,size:"sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Question"),r.a.createElement("th",null,"Answer"))),r.a.createElement("tbody",null,null===(t=e.item)||void 0===t?void 0:t.map((function(e){var t;return e.answer.length>0?e.answer[0].valueCoding?r.a.createElement("tr",{key:e.linkId},r.a.createElement("td",null,O()(JSON.stringify(e.text))),r.a.createElement("td",null,null===(t=e.answer[0].valueCoding)||void 0===t?void 0:t.display)):e.answer[0].valueString.length>0?r.a.createElement("tr",{key:e.linkId},r.a.createElement("td",null,O()(JSON.stringify(e.text))),r.a.createElement("td",null,e.answer[0].valueString)):e.answer[0].valueDateTime.length>0?r.a.createElement("tr",{key:e.linkId},r.a.createElement("td",null,O()(JSON.stringify(e.text))),r.a.createElement("td",null,e.answer[0].valueDateTime)):r.a.createElement("tr",{key:e.linkId},r.a.createElement("td",null,O()(JSON.stringify(e.text))),r.a.createElement("td",null,"Not answered.")):r.a.createElement("tr",null,r.a.createElement("td",null,"nothing here!"))})))))})))}}]),n}(r.a.Component),q=n(17),M=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).questionnaireResponse=a.props.questionnaireResponse,a.receiveData=function(e){!0===e&&a.setState({showReviewInfo:!0,showConfirmation:!1},(function(){}))},a.state={showConfirmation:!1,showReviewInfo:!1,showModal:!1},a}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"questionnaire"},this.props.questionnaire.item.map((function(t,n){var a;return r.a.createElement(N,{receivingCallback:e.receiveData,length:null===(a=e.props.questionnaire.item)||void 0===a?void 0:a.length,QuestionnaireItem:t,key:n,onChange:e.props.onChange})})),r.a.createElement("div",{className:this.state.showReviewInfo?"":"hidden"},r.a.createElement("div",null,r.a.createElement(f.a,{className:"btn-outline-secondary edit-button",onClick:function(t){e.setState({showReviewInfo:!1}),e.props.onEdit()}},r.a.createElement(k.a,{icon:g.a})),r.a.createElement("div",null,r.a.createElement("h4",null,"Review and Submit"),r.a.createElement(j,Object.assign({goEdit:this.props.onEdit},this.props.questionnaireResponse))),r.a.createElement("div",{className:"submit-confirmation-text"},r.a.createElement("p",null,"Once you are satisfied with your responses, click the continue button below.")),r.a.createElement(f.a,{className:"continue-button",type:"button",onClick:this.props.onSubmit},r.a.createElement(k.a,{icon:q.a})," Continue"))))}}]),n}(r.a.Component),D=n(22),J=n.n(D),T="mpc-prostate-questionnaire";n(181);var P=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={},a}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"patient-view"},r.a.createElement("div",{className:"welcome"},r.a.createElement("h4",null,"Welcome to MyPreventiveCare!"),r.a.createElement("p",{className:"intro-text mb-5"},"MyPreventiveCare is a tool to help you and your doctor work together to keep you healthy. It is a completely personalized way to see what steps you\u2019ve already taken and what else you can do to check for and prevent illnesses."),r.a.createElement("p",{className:"intro-text mb-5"},"MyPreventiveCare doesn\u2019t just tell you what ",r.a.createElement("i",null,"people")," should do to stay healthy \u2013 it is all about what ",r.a.createElement("i",null,"you")," need to stay healthy.")),r.a.createElement("div",{className:"intro-container"},r.a.createElement("p",null,"Your doctor and your care team see that your upcoming visit may be related to preventive care. We\u2019d like to learn more about your preferences so we can work together to help you live a healthy life. Please take a few minutes to share your health and care goals with us. ")))}}]),n}(r.a.Component),L=n(195),V=(n(182),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return this.props.busy?r.a.createElement("div",{className:"spinner-overlay"},r.a.createElement(L.a,{animation:"border",variant:"primary"})):null}}]),n}(r.a.Component)),z=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{style:{position:"relative"}},this.props.children)}}]),n}(r.a.Component),A=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={},a}return Object(m.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.busy;e.busy!==t&&this.setState({busy:t},(function(){}))}},{key:"render",value:function(){return r.a.createElement(z,null,r.a.createElement(V,{busy:this.state.busy}),r.a.createElement(P,this.state,this.state.patient))}}]),n}(r.a.Component),Y=(n(183),n(196)),F=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e,a){var r;return Object(u.a)(this,n),(r=t.call(this,e,a)).confirm=function(){console.log("props:",r.props),r.props.onSubmit()},r.handleShow=r.handleShow.bind(Object(p.a)(r)),r.handleClose=r.handleClose.bind(Object(p.a)(r)),r.state={show:!1,redirect:!1},r}return Object(m.a)(n,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{show:this.state.show,onHide:this.handleClose,animation:!1},r.a.createElement(Y.a.Header,{closeButton:!0},r.a.createElement(Y.a.Title,null)),r.a.createElement(Y.a.Body,null,r.a.createElement("p",null,"Click the submit button below to send this information to your doctor and your care team. Please be sure to check in with your provider to see if they have accessed PainManager to review your MyPAIN materials."),r.a.createElement("p",null,"For additional assistance with MyPAIN or questions about your upcoming appointment, please contact your health care provider.")),r.a.createElement(Y.a.Footer,null,r.a.createElement(f.a,{variant:"danger",className:"close-button",onClick:this.handleClose}," ",r.a.createElement(k.a,{icon:q.c})," Cancel "),r.a.createElement(f.a,{variant:"success",className:"submit-button",onClick:this.confirm}," ",r.a.createElement(k.a,{icon:q.a})," Submit "))))}}]),n}(r.a.Component),B=n(89),U=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e)).appVersion=B.version,r.questionnaireContainer=Object(a.createRef)(),r.handleModal=Object(a.createRef)(),r.ptRef=void 0,r.ptDisplay=void 0,r.startQuestionnaire=function(){r.setState({Status:"in-progress"},(function(){r.questionnaireContainer.current&&(r.questionnaireContainer.current.firstChild.firstChild.classList.add("active"),r.questionnaireContainer.current.scrollIntoView({behavior:"smooth",block:"nearest"}))}))},r.goToEditQuestionnaire=function(){r.setState({Status:"in-progress"},(function(){var e,t;r.questionnaireContainer.current&&(r.questionnaireContainer.current.firstElementChild.children[(null===(e=r.state.SelectedQuestionnaire)||void 0===e||null===(t=e.item)||void 0===t?void 0:t.length)||0].classList.add("active"),r.questionnaireContainer.current.scrollIntoView({behavior:"smooth",block:"nearest"}))}))},r.handleOpenModal=function(){r.handleModal.current.handleShow()},r.state={showModal:!1,Status:"not-started",ErrorMessage:void 0,busy:!0,Patient:void 0,SelectedQuestionnaire:void 0,QuestionnaireResponse:{resourceType:"QuestionnaireResponse",status:"in-progress",item:[]},ServerUrl:[]},r.handleChange=r.handleChange.bind(Object(p.a)(r)),r.submitAnswers=r.submitAnswers.bind(Object(p.a)(r)),r.startQuestionnaire=r.startQuestionnaire.bind(Object(p.a)(r)),r}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;(function(e){var t;return J.a.oauth2.ready().then((function(e){return t=e.state.serverUrl,e.request("Questionnaire/"+T)})).then((function(n){return e.push(t+"/Questionnaire/"+n.id),n})).catch((function(e){return e}))})(this.state.ServerUrl).then((function(t){var n=t;J.a.oauth2.ready().then((function(e){return e.patient.read()})).then((function(t){return e.setState({Patient:t,busy:!1}),t.id?e.ptRef=t.id:e.ptRef=" ",e.ptDisplay=t.name[0].given[0]+" "+t.name[0].family,e.selectQuestionnaire(n,e.ptRef,e.ptDisplay)})).catch((function(t){e.setState({busy:!1,Status:"error",ErrorMessage:t.message},(function(){console.log("err: ",t.message)}))}))})).catch((function(t){e.setState({busy:!1,Status:"error",ErrorMessage:t.message},(function(){console.log("err: ",t.message)}))}))}},{key:"selectQuestionnaire",value:function(e,t,n){this.setState({SelectedQuestionnaire:e,QuestionnaireResponse:Object(c.a)(Object(c.a)({},this.state.QuestionnaireResponse),{},{questionnaire:this.state.ServerUrl.pop(),subject:{reference:"Patient/"+t,display:n},item:[]})})}},{key:"handleChange",value:function(e,t){var n=this;this.setState((function(t){for(var a=0;a<t.QuestionnaireResponse.item.length;a++)e.linkId===t.QuestionnaireResponse.item[a].linkId&&(t.QuestionnaireResponse.item[a]=e,t.QuestionnaireResponse.item.splice(a,1));return{QuestionnaireResponse:Object(c.a)(Object(c.a)({},n.state.QuestionnaireResponse),{},{resourceType:t.QuestionnaireResponse.resourceType,status:t.QuestionnaireResponse.status,item:t.QuestionnaireResponse.item.concat(e)})}}),(function(){}))}},{key:"formatDateItem",value:function(e){return e<10?"0"+e:e.toString()}},{key:"getCurrentDate",value:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,a=e.getFullYear(),r=e.getHours(),i=e.getMinutes(),s=e.getSeconds(),o=e.getTimezoneOffset()/60;return a+"-"+this.formatDateItem(n)+"-"+this.formatDateItem(t)+"T"+this.formatDateItem(r)+":"+this.formatDateItem(i)+":"+this.formatDateItem(s)+"-"+this.formatDateItem(o)+":00"}},{key:"submitAnswers",value:function(){var e=this;this.setState((function(t){var n;return{QuestionnaireResponse:Object(c.a)(Object(c.a)({},e.state.QuestionnaireResponse),{},{resourceType:t.QuestionnaireResponse.resourceType,authored:e.getCurrentDate(),status:"completed",meta:null===(n=e.state.SelectedQuestionnaire)||void 0===n?void 0:n.meta,item:t.QuestionnaireResponse.item}),busy:!0}}),(function(){var t;(t=e.state.QuestionnaireResponse,J.a.oauth2.ready().then((function(e){return e.create(t)})).then((function(e){return e})).catch((function(e){console.log("oops: ",e)}))).then((function(t){e.setState({Status:"completed",busy:!1}),console.log("res: ",t)})).catch((function(t){e.setState({Status:"error",busy:!1,ErrorMessage:t.message}),console.error(t)}))}))}},{key:"setTheme",value:function(e){document.documentElement.style.setProperty("--color-dark",e)}},{key:"render",value:function(){var e=this;return"completed"===this.state.Status?r.a.createElement(l.a,{push:!0,to:"/confirmation"}):"error"===this.state.Status?r.a.createElement(l.a,{push:!0,to:{pathname:"/error/",state:this.state.ErrorMessage}}):this.state.SelectedQuestionnaire?r.a.createElement("div",{className:"app"},r.a.createElement("header",{className:"app-header"},r.a.createElement("img",{className:"mypain-header-logo",src:"".concat("/mpc","/assets/images/mpc-logo.png"),alt:""}),r.a.createElement("p",null,"v",this.appVersion)),"in-progress"!==this.state.Status?r.a.createElement("div",null,r.a.createElement("div",{className:"patient-container"},r.a.createElement(A,{patient:this.state.Patient,busy:this.state.busy}),r.a.createElement(f.a,{variant:"outline-secondary",size:"lg",className:"next-button",onClick:this.startQuestionnaire},"Next"))):r.a.createElement("div",{ref:this.questionnaireContainer},r.a.createElement(M,{questionnaire:this.state.SelectedQuestionnaire,questionnaireResponse:this.state.QuestionnaireResponse,onEdit:this.goToEditQuestionnaire,onChange:this.handleChange,onSubmit:function(t){e.handleOpenModal()}}),r.a.createElement(F,{ref:this.handleModal,show:this.state.showModal,onSubmit:this.submitAnswers}))):r.a.createElement("div",{className:"app"},r.a.createElement("header",{className:"app-header"},r.a.createElement("p",null,"MyPain \u2003\u2003v ",this.appVersion)),r.a.createElement("div",{className:"patient-container"},r.a.createElement(A,{patient:this.state.Patient,busy:this.state.busy})),r.a.createElement("div",null))}}]),n}(r.a.Component);n(187),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(188);var W=function(e){return r.a.createElement("div",{className:"error-page"},r.a.createElement("div",{className:"confirmation-container"},r.a.createElement("h1",null," ",r.a.createElement(k.a,{size:"2x",icon:q.c,className:"error-icon"})),r.a.createElement("h2",null,"OOPS!"),r.a.createElement("p",null,e.location.state),r.a.createElement(o.b,{to:"/"},r.a.createElement(f.a,{className:"continue-button",type:"button"},"Return to home"))))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:U}),r.a.createElement(l.b,{exact:!0,path:"/confirmation",component:function(){return r.a.createElement("div",{className:"confirmation-page"},r.a.createElement("div",{className:"confirmation-container"},r.a.createElement("h1",null," ",r.a.createElement(k.a,{icon:q.b})),r.a.createElement("h2",null,"Congratulations!"),r.a.createElement("p",null,"Your responses have been successfully recorded. You may now close your browser window.")))}}),r.a.createElement(l.b,{exact:!0,path:"/error",component:W}),r.a.createElement(l.b,{component:W})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e){e.exports=JSON.parse('{"name":"mpc","version":"0.1.0","private":true,"homepage":"https://chronic-care.github.io/mpc","dependencies":{"@fortawesome/fontawesome-svg-core":"^1.2.29","@fortawesome/free-regular-svg-icons":"^5.13.1","@fortawesome/free-solid-svg-icons":"^5.13.1","@fortawesome/react-fontawesome":"^0.1.11","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","@types/fhir":"^0.0.31","@types/jest":"^25.2.1","@types/node":"^13.11.0","@types/react":"^16.9.32","@types/react-dom":"^16.9.6","@types/react-youtube":"^7.6.2","array.prototype.fill":"^1.0.2","bootstrap":"^4.5.0","fhirclient":"^2.3.0","html-react-parser":"^0.14.1","moment":"^2.29.1","react":"^16.13.1","react-bootstrap":"^1.0.1","react-breakpoint-fix":"^1.0.7","react-circular-progressbar":"^2.0.3","react-dom":"^16.13.1","react-router-dom":"^5.2.0","react-scripts":"3.4.1","react-youtube":"^7.13.0"},"devDependencies":{"@rescripts/cli":"^0.0.13","@rescripts/utilities":"^0.0.6","@types/react-router-dom":"^5.1.6","cors":"^2.8.5","express":"^4.17.1","gh-pages":"^2.2.0","typescript":"^3.8.3"},"scripts":{"start":"rescripts start","build":"rescripts build","test":"rescripts test","eject":"rescripts eject","predeploy":"rescripts build","deploy":"gh-pages -d build"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all","ie 11"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version","ie 11"]}}')},91:function(e,t,n){e.exports=n(191)},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[91,4,0,5]]]);